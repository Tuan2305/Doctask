src/app/components/edit-task-modal/edit-task-modal.component.html
<div class="edit-task-modal">
  <div class="modal-header">
    <h3>{{ isAddingSubtask ? 'Thêm việc con' : 'Sửa công việc' }}</h3>
    <button nz-button nzType="text" class="close-btn" (click)="closeModal()">
      <span nz-icon nzType="close"></span>
    </button>
  </div>

  <form nz-form [formGroup]="editForm" (ngSubmit)="submitForm()" class="edit-form">
    <!-- Tên công việc -->
    <nz-form-item>
      <nz-form-label nzRequired>Tên công việc :</nz-form-label>
      <nz-form-control nzErrorTip="Vui lòng nhập tên công việc!">
        <input nz-input formControlName="title" placeholder="Nhập tên công việc" />
      </nz-form-control>
    </nz-form-item>

    <!-- Chỉ hiển thị các trường này khi thêm việc con -->
    <ng-container *ngIf="isAddingSubtask">
      <!-- Đặt thời hạn -->
      <nz-form-item>
        <nz-form-label nzRequired>Đặt thời hạn :</nz-form-label>
        <nz-form-control nzErrorTip="Vui lòng chọn thời gian!">
          <nz-range-picker 
            formControlName="dateRange" 
            nzFormat="yyyy-MM-dd HH:mm"
            nzShowTime
            [nzPlaceHolder]="['Ngày bắt đầu', 'Ngày kết thúc']"
            class="full-width">
          </nz-range-picker>
        </nz-form-control>
      </nz-form-item>

      <!-- Phân công -->
      <nz-form-item>
        <nz-form-label>Phân công :</nz-form-label>
        <nz-form-control>
          <div class="assignment-section">
            <div class="assignment-options">
              <label class="assignment-label">Bấm để chọn người thực hiện</label>
              <div class="assignment-toggle">
                <span>Đơn vị</span>
                <!-- Sửa để sử dụng đúng properties của nz-switch -->
                <nz-switch 
                  [(ngModel)]="isUnitAssignment"
                  [ngModelOptions]="{standalone: true}"
                  (ngModelChange)="onAssignTypeChange($event)">
                </nz-switch>
              </div>
            </div>
            
            <!-- Chọn người thực hiện -->
            <nz-select 
              *ngIf="!isUnitAssignment"
              formControlName="assigneeIds"
              nzMode="multiple" 
              nzPlaceHolder="Chọn người thực hiện"
              class="full-width assignment-select"
              nzOptionGroupClass="user-group-select">
              
              <!-- Subordinates Group -->
              <nz-option-group nzLabel="-- Cá nhân ngang cấp --" *ngIf="assignees.length > 0">
                <nz-option 
                  *ngFor="let user of assignees" 
                  [nzLabel]="user.fullName" 
                  [nzValue]="user.userId">
                </nz-option>
              </nz-option-group>
              
              <!-- Peers Group -->
              <nz-option-group nzLabel="-- Cá nhân cấp dưới --" *ngIf="peers.length > 0">
                <nz-option 
                  *ngFor="let peer of peers" 
                  [nzLabel]="peer.fullName" 
                  [nzValue]="peer.userId">
                </nz-option>
              </nz-option-group>
            </nz-select>

            <!-- Chọn đơn vị -->
            <nz-select 
              *ngIf="isUnitAssignment"
              formControlName="unitIds"
              nzMode="multiple" 
              nzPlaceHolder="Chọn đơn vị"
              class="full-width assignment-select">
              <nz-option *ngFor="let unit of units" [nzLabel]="unit.unitName" [nzValue]="unit.unitId"></nz-option>
            </nz-select>
          </div>
        </nz-form-control>
      </nz-form-item>

      <!-- Chọn kỳ báo cáo -->
      <nz-form-item>
        <nz-form-label>Chọn kỳ báo cáo :</nz-form-label>
        <nz-form-control>
          <nz-tabset 
            [nzSelectedIndex]="selectedReportIndex"
            (nzSelectedIndexChange)="onReportTabChange(reportTabs[$event].value)"
            class="report-frequency-tabs">
            <nz-tab *ngFor="let tab of reportTabs" [nzTitle]="tab.label"></nz-tab>
          </nz-tabset>
          
          <!-- Hiển thị thông tin cấu hình theo tab -->
          <div class="frequency-config" *ngIf="selectedReportTab === 'daily'">
            <div class="config-row">
              <span>Vào ngày</span>
              <nz-input-number 
                formControlName="intervalValue" 
                [nzMin]="1" 
                [nzMax]="365"
                class="interval-input">
              </nz-input-number>
            </div>
          </div>
          
          <div class="frequency-config" *ngIf="selectedReportTab === 'monthly'">
            <div class="config-row">
              <span>Số tháng lặp lại</span>
              <nz-input-number 
                formControlName="intervalValue" 
                [nzMin]="1" 
                [nzMax]="12"
                class="interval-input">
              </nz-input-number>
              <span>tháng</span>
            </div>
            <div class="config-description">
              Lặp lại vào ngày {{ editForm.get('intervalValue')?.value || 1 }}, mỗi {{ editForm.get('intervalValue')?.value || 1 }} tháng
            </div>
          </div>
          
          <!-- Thêm button xác nhận cho config -->
          <div class="config-actions" *ngIf="selectedReportTab !== 'weekly'">
            <button nz-button nzType="primary" nzSize="small" type="button">
              Xác nhận
            </button>
          </div>
        </nz-form-control>
      </nz-form-item>
    </ng-container>

    <!-- Nội dung công việc -->
    <nz-form-item>
      <nz-form-label>Nội dung công việc :</nz-form-label>
      <nz-form-control>
        <textarea 
          nz-input 
          formControlName="description" 
          [nzAutosize]="{ minRows: 4, maxRows: 6 }"
          placeholder="Mô tả chi tiết công việc...">
        </textarea>
      </nz-form-control>
    </nz-form-item>

    <!-- Action buttons -->
    <div class="modal-footer">
      <div class="footer-left" *ngIf="isAddingSubtask">
        <button nz-button nzType="primary" class="assign-btn" (click)="submitForm()" [nzLoading]="isLoading">
          <span nz-icon nzType="plus"></span>
          Xác nhận giao việc
        </button>
        <button nz-button nzType="default" class="cancel-btn" (click)="cancelAssignment()">
          Hủy giao việc
        </button>
      </div>
      <div class="footer-right" *ngIf="!isAddingSubtask">
        <button nz-button nzType="default" (click)="closeModal()" [disabled]="isLoading">Hủy bỏ</button>
        <button nz-button nzType="primary" (click)="submitForm()" [nzLoading]="isLoading" class="save-btn">
          Lưu thay đổi
        </button>
      </div>
    </div>
  </form>
</div>